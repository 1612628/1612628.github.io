<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Duy-Thanh Blog  | System Thinking</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.54.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="https://1612628.github.io/dist/css/app.955516233bcafa4d2a1c13cea63c7b50.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="System Thinking" />
<meta property="og:description" content="System Design Primer" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://1612628.github.io/posts/system-thinking/" />


<meta itemprop="name" content="System Thinking">
<meta itemprop="description" content="System Design Primer">



<meta itemprop="wordCount" content="511">



<meta itemprop="keywords" content="tecnical-skill,zalopay-edu," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="System Thinking"/>
<meta name="twitter:description" content="System Design Primer"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://1612628.github.io" class="f3 fw2 hover-white no-underline white-90 dib">
      Duy-Thanh Blog
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://1612628.github.io/" title="Home page">
              Home
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://1612628.github.io/tags/" title="Tags page">
              Tags
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://1612628.github.io/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
        </ul>
      
      







<a href="1612628" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>





    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        ARTICLES
      </p>
      <h1 class="f1 athelas mb1">System Thinking</h1>
      
      <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z">January 1, 0001</time>      
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<p>#System Design Primer
###1. Định lý CAP
<img src="**C**onsistency - **A**vailability - **P**artition Tolerance" alt="cap-theorem" />
Được đề xuất bởi tiến sĩ Eric Brewer. Trong một hệ thống phân tán ta chỉ có thể giữ được 2 trong 3 giá trị (tinh chất) nói trên và phải hy sinh 1 tính chất. Ta sẽ nói rõ các tính chất sau đây:
- <strong>C</strong>onsistency (tính nhất quán /đồng nhất): Mỗi lần đọc dữ liệu sẽ nhận được dữ liệu mới nhất hoặc làeorem
- <strong>A</strong>vailability (tính sẵn sàng): Một node không bị lỗi sẽ trả về một response thích hợp (không đảm bảo thông tin là mới nhất) trong một khoảng thời gian thích hợp.
- <strong>P</strong>artition Tolerance (phân vùng): Hệ thống có tiếp tục hoạt động, bất chấp một lượng tùy ý các thông điệp (gói tin) bị mất hoặc trì hoãn do trục trặc hoặc đứt kết nối mạng.<br />
<img src="https://1612628.github.io/assets/images_system_thinking/partition.png" alt="partition" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Đường truyền kết nối mạng thường hay bị đứt và không đoán trước được vì thế lỗi mạng có thể xảy với hệ thống của bạn bất kì lức nào mà bạn không thể lường trước được. Nên khi bạn muốn cung cấp hệ thống phân tán (Partition Tolerance) thì bạn phải đánh đổi hoặc là chọn Consistency hoặc là chọn Availability.</p>

<ul>
<li><strong>CP</strong> - <strong>C</strong>onsistency/<strong>P</strong>artition Tolerance - khi đường dẫn bị đứt việc đợi một response từ node phân tán mà có thể dẫn đến lỗi time out. Hệ thống sẽ có thể chọn trả về lỗi tùy theo mong muốn người xây dựng hệ thống. <strong>CP</strong> tốt trong trường hợp khi yêu cầu hệ thống của bạn phải là atomic reads and writes (tất cả hình thức đọc và ghi phải là luôn đúng với mọi quy trình).
<img src="https://1612628.github.io/assets/images_system_thinking/consistency.png" alt="consistency" /></li>
<li><strong>AP</strong> - <strong>A</strong>vailability/<strong>P</strong>artition Tolerance - các responses sẽ trả về những phiên bản dữ liệu gần nhất hiện tại đang có trên node, có thể không phải là phiên bản mới nhất. Trạng thái hệ thống cũng có thể chấp nhận các lệnh Writes(ghi) mà sau đó có thể được xử lý khi tình trạng đứt mạng của các node được phục hồi. <strong>AP</strong> tốt khi hệ thống kinh doanh của bạn cần sự linh động về dữ liệu khi đồng bộ, đáp ứng nhu cầu liên tục của khách hàng. <strong>AP</strong> là một lựa chọn tốt cho hệ thống cần sự không bị gián đoạn chức cho dù xảy ra một số lỗi bên ngoài.
<img src="https://1612628.github.io/assets/images_system_thinking/availability.png" alt="availability" /><br /></li>
</ul>

<p>Việc chọn lựa giữa <strong>C</strong>onsistency hay <strong>A</strong>vailability là tùy vào nghiệp vụ và yêu cầu của mô hình kinh doanh. Khi đối mặt với sự ngắt kết nối giữa các node, bạn phải có sự lựa chọn đánh đổi phù hợp với mô hình kinh doanh xây dựng. Dù muốn hay không, việc đứt kết nối mạng là một điều thực tế và không thể tránh khỏi. Bạn cần hiểu và chấp nhận sự <em>không hoàn hảo</em> này của mọi hệ thống.<br />
Trong bài này, mình sẽ tập trung vào giải pháp <strong>AP</strong> vì nó thực tế và đáp ứng được nhiều yêu cầu và mô hình kinh doanh hiện nay.</p>

<h3 id="2-giải-pháp-ap">2. Giải pháp AP</h3>
<ul class="pa0">
  
   <li class="list">
     <a href="https://1612628.github.io/tags/tecnical-skill" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">tecnical-skill</a>
   </li>
  
   <li class="list">
     <a href="https://1612628.github.io/tags/zalopay-edu" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">zalopay-edu</a>
   </li>
  
</ul>
<div class="mt6">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "disqus_shortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://1612628.github.io" >
    &copy; 17049 Duy-Thanh Blog
  </a>
    <div>







<a href="1612628" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




</div>
  </div>
</footer>

    

  <script src="https://1612628.github.io/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
